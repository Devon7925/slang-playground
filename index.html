<html>
  <script src="try-slang.js"> </script>
  <script src="slang-wasm.js"></script>
  <script src="util.js"></script>
  <script src="pass_through.js"></script>
  <script src="try-slang.js"></script>
  <script src="slang-wgsl.js"></script>
  <head>
    <title>Try Slang!</title>
  </head>
  <body>
    <canvas id="canvas" width="640" height="480"></canvas>
    <h1>Input (Slang)</h1>
    <textarea id="input" rows="20" cols="90">

RWStructuredBuffer<int>               outputBuffer;
[format("r32f")] RWTexture2D<float>   texture;


[shader("compute")]
void computeMain(int3 dispatchThreadID : SV_DispatchThreadID)
{
    int idx = dispatchThreadID.x * 32 + dispatchThreadID.y;
    outputBuffer[idx] = idx;

    uint width = 0;
    uint height = 0;
    texture.GetDimensions(width, height);

    float2 size = float2(width, height);
    float2 center = size / 2.0;

    float2 pos = float2(dispatchThreadID.xy);

    float dist = distance(pos, center);
    float strip = dist / 32.0 % 2.0;

    uint color = 0;
    if (strip < 1.0f)
        color = 0xFF0000FF;
    else
        color = 0x00FFFFFF;

    texture[dispatchThreadID.xy] = float(color);
}
    </textarea>
    <button id="run" onclick="onRunCompile()">Run</button>
    <h1>Output (WGSL)</h1>
    <textarea id="output" rows="20" cols="90"></textarea>
    <h1>Compute Result</h1>
    <textarea id="result" rows="20" cols="40"></textarea>
  </body>
</html>
